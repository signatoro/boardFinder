#:include kv/cards/localEventCard.kv

<HomeScreen>:
    name: "home_screen"
    id: home_screen

    MDBoxLayout:
        spacing: 10
        orientation: 'vertical'
        cols: 1

        MDTopAppBar:
            title: "BoardGameTopBar"
            pos_hint_y: None
            #left_action_items:
            #    [["home", lambda x: app.change_screen("home_screen", direction='right'), "Home", "?!?"]]
            right_action_items:
                [["account", lambda x: app.change_screen("create_account_screen", direction='left'), "Sign In", "???"]]

        # BoxLayout widget for central buttons
        MDBoxLayout:
            spacing: 10
            #padding: 10
            orientation: 'horizontal'
            size_hint: (1, 0.3)

            MDFillRoundFlatIconButton:
                size_hint: (1, 1)
                #font_size: self.width/10
                font_size: 22
                #text_size: self.size
                text: 'Find a \nGroup'
                halign: 'center'
            MDFillRoundFlatIconButton:
                size_hint: (1, 1)
                #font_size: self.width/10
                font_size: 22
                #text_size: self.size
                text: 'Learn a \nGame'
                halign: 'center'
                on_release: app.change_screen("learn_game_screen")
            MDFillRoundFlatIconButton:
                size_hint: (1, 1)
                #font_size: self.width/10
                font_size: 22
                #text_size: self.size
                text: 'Create a \nGroup'
                halign: 'center'
                on_release: app.change_screen("create_group_screen")

        MDTabs:
            lock_swiping: True
            anim_duration: 0
            #anim_threshold: 0
            #scroll_timeout: 0

            Tab:
                title: "Local Events"
                md_bg_color: app.theme_cls.primary_color
                #lock_swiping: True
                #anim_duration: 0
                #anim_threshold: 0
                #scroll_timeout: 0
                MDCarousel:
                    id: local_event_carou
                    #min_move: 0.0001
                    #anim_cancel_duration: 0.0001
                    #scroll_distance: 0.0001
                    padding: [100, 100, 100, 100]

                    # MDCard:
                    #     id: local_refresh_card
                    #     radius: 25
                    #     max_swipe_x: 0
                    #     size_hint: (.98, .98)
                    #     md_bg_color: "darkgrey"
                    #     pos_hint: {"center_x": 0.5, "center_y": 0.5}

                    #     on_release: root.refresh_local_events()
                        
                    #     MDBoxLayout:
                    #         md_bg_color: "white"
                    #         size_hint: (1,1)
                    #         radius: 25
                    #         pos_hint: {"center_x": .5, "center_y": .5}  

                    #         MDLabel:
                    #             text: 'Refresh Local Events'
                    #             icon: "refresh"
                    #             adaptive_size: True
                    #             md_bg_color: "white"
                    #             # size: self.texture_size  # Adjust the size based on the text size
                    #             pos_hint: {"center_x": 0.5, "center_y": .5}                            
                    #             color: (0, 0, 0, 1)
                    #             bold: True
                    #             anchor_x: 'center'  # Align the text in the center horizontally


            Tab:
                title: "My Groups"
                #lock_swiping: True
                #anim_duration: 0
                #anim_threshold: 0
                #scroll_timeout: 0
                MDCarousel:
                    id: group_card_carou
                    #min_move: 0.0001
                    #anim_cancel_duration: 0.0001
                    #scroll_distance: 0.0001
                    MDCard:
                        max_swipe_x: 0
                        radius: 25
                        size_hint: (1, 1)
                        md_bg_color: "darkgrey"

                        on_release: root.refresh_local_events()
                        
                        MDLabel:
                            text: 'Refresh My Groups'
                            icon: "refresh"
                            adaptive_size: True
                            pos_hint: {"center_x": 0.5, "center_y": 0.5}
                            color: (0, 0, 0, 1)
                            bold: True